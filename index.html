let touchStartX = null;
let touchStartY = null;

function handleTouchStart(event) {
    touchStartX = event.touches[0].pageX;
    touchStartY = event.touches[0].pageY;
}

function handleTouchEnd(event) {
    const touchEndX = event.changedTouches[0].pageX;
    const touchEndY = event.changedTouches[0].pageY;

    const touchDiffX = touchEndX - touchStartX;
    const touchDiffY = touchEndY - touchStartY;

    if (Math.abs(touchDiffX) > Math.abs(touchDiffY)) {
        if (touchDiffX > 0) {
            // Swipe right
            player.x++;
            lastFacingDirection = 'right';
        } else {
            // Swipe left
            player.x--;
            lastFacingDirection = 'left';
        }
    } else {
        if (touchDiffY > 0) {
            // Swipe down
            player.y++;
            lastFacingDirection = 'down';
        } else {
            // Swipe up
            player.y--;
            lastFacingDirection = 'up';
        }
    }
}

canvas.addEventListener('touchstart', handleTouchStart);
canvas.addEventListener('touchend', handleTouchEnd);
canvas.addEventListener('keydown', handleKeydown);
canvas.addEventListener('keydown', event => {
    if (event.key === ' ') {
        shootLasers();
    }
});
